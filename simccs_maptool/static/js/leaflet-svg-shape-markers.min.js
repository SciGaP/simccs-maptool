L.SVG.include({_updateShape:function(t){var i=t._point,s=t._radius,a=t.options.shape;if("diamond"===a){var e="M"+(i.x-Math.sqrt(2)*s)+" "+i.y+" L "+i.x+" "+(i.y-Math.sqrt(2)*s)+" L"+(i.x+Math.sqrt(2)*s)+" "+i.y+" L"+i.x+" "+(i.y+Math.sqrt(2)*s)+" L"+(i.x-Math.sqrt(2)*s)+" "+i.y;this._setPath(t,e)}if("square"===a){var e="M"+(i.x-s)+" "+(i.y-s)+" L "+(i.x+s)+" "+(i.y-s)+" L"+(i.x+s)+" "+(i.y+s)+" L"+(i.x-s)+" "+(i.y+s)+" L"+(i.x-s)+" "+(i.y-s);this._setPath(t,e)}if("triangle"===a||"triangle-up"===a){var e="M"+(i.x-1.3*s)+" "+(i.y+.75*s)+" L"+i.x+" "+(i.y-1.5*s)+" L"+(i.x+1.3*s)+" "+(i.y+.75*s)+" Z";this._setPath(t,e)}if("triangle-down"===a){var e="M"+(i.x-1.3*s)+" "+(i.y-.75*s)+" L"+i.x+" "+(i.y+1.5*s)+" L"+(i.x+1.3*s)+" "+(i.y-.75*s)+" Z";this._setPath(t,e)}if("arrowhead"===a||"arrowhead-up"===a){var e="M "+(i.x+1.3*s)+" "+(i.y+1.3*s)+" L "+i.x+" "+(i.y-1.3*s)+" L "+(i.x-1.3*s)+" "+(i.y+1.3*s)+" L "+i.x+" "+(i.y+.5*s)+" L "+(i.x+1.3*s)+" "+(i.y+1.3*s)+" Z";this._setPath(t,e)}if("arrowhead-down"===a){var e="M "+(i.x-1.3*s)+" "+(i.y-1.3*s)+" L "+i.x+" "+(i.y+1.3*s)+" L "+(i.x+1.3*s)+" "+(i.y-1.3*s)+" L "+i.x+" "+(i.y-.5*s)+" L "+(i.x-1.3*s)+" "+(i.y-1.3*s)+" Z";this._setPath(t,e)}if("circle"===a&&this._updateCircle(t),"x"===a){s/=2;var e="M"+(i.x+s)+","+(i.y+s)+"L"+(i.x-s)+","+(i.y-s)+"M"+(i.x-s)+","+(i.y+s)+"L"+(i.x+s)+","+(i.y-s);this._setPath(t,e)}}}),L.ShapeMarker=L.Path.extend({options:{fill:!0,shape:"triangle",radius:10},initialize:function(t,i){L.setOptions(this,i),this._latlng=L.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=L.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return L.Path.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,s=this._clickTolerance(),a=[t+s,i+s];this._pxBounds=new L.Bounds(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateShape(this)},_empty:function(){return this._size&&!this._renderer._bounds.intersects(this._pxBounds)},toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:"Point",coordinates:L.GeoJSON.latLngToCoords(this.getLatLng())})}}),L.shapeMarker=function(t,i){return new L.ShapeMarker(t,i)};